<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>title | TypeScript4 中文文档</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?82a3f80007c4e88c786f3602d0b8a215";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
        </script>
    <script>
        (function() {
	         if (location.href.indexOf('github.io') > -1 || location.href.indexOf('gitee.io') > -1) {
           		location.href = 'https://ts.yayujs.com';
           }
        })();
        </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/12.3.2/markdown-it.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>
    <meta name="description" content="description">
    <meta name="keywords" content="super duper SEO">
    <meta name="baidu-site-verification" content="code-ODI5Ny1Ypq">
    <meta name="shenma-site-verification" content="437b0b24fde80c5638f0a422c8d8b9eb_1646289640">
    <meta name="sogou_site_verification" content="tkDYjAgVj3">
    
    <link rel="preload" href="/learn-typescript/assets/css/0.styles.538df46e.css" as="style"><link rel="preload" href="/learn-typescript/assets/js/app.4ea17abc.js" as="script"><link rel="preload" href="/learn-typescript/assets/js/3.ebbd5603.js" as="script"><link rel="preload" href="/learn-typescript/assets/js/1.af137d23.js" as="script"><link rel="preload" href="/learn-typescript/assets/js/24.36da8f67.js" as="script"><link rel="prefetch" href="/learn-typescript/assets/js/10.34d1b24d.js"><link rel="prefetch" href="/learn-typescript/assets/js/11.22308e2c.js"><link rel="prefetch" href="/learn-typescript/assets/js/12.24227b7f.js"><link rel="prefetch" href="/learn-typescript/assets/js/13.5711ef55.js"><link rel="prefetch" href="/learn-typescript/assets/js/14.fce36268.js"><link rel="prefetch" href="/learn-typescript/assets/js/15.760c1ae0.js"><link rel="prefetch" href="/learn-typescript/assets/js/16.0bff8200.js"><link rel="prefetch" href="/learn-typescript/assets/js/17.f2cca8d4.js"><link rel="prefetch" href="/learn-typescript/assets/js/18.f188ae58.js"><link rel="prefetch" href="/learn-typescript/assets/js/19.5943124a.js"><link rel="prefetch" href="/learn-typescript/assets/js/20.0a1c7565.js"><link rel="prefetch" href="/learn-typescript/assets/js/21.1e8e6484.js"><link rel="prefetch" href="/learn-typescript/assets/js/22.54f512f7.js"><link rel="prefetch" href="/learn-typescript/assets/js/23.e1938187.js"><link rel="prefetch" href="/learn-typescript/assets/js/25.a4fdc4f4.js"><link rel="prefetch" href="/learn-typescript/assets/js/26.8d2afc2e.js"><link rel="prefetch" href="/learn-typescript/assets/js/27.69126d20.js"><link rel="prefetch" href="/learn-typescript/assets/js/28.03139510.js"><link rel="prefetch" href="/learn-typescript/assets/js/29.c643b1cb.js"><link rel="prefetch" href="/learn-typescript/assets/js/30.d3289dbb.js"><link rel="prefetch" href="/learn-typescript/assets/js/31.944754f6.js"><link rel="prefetch" href="/learn-typescript/assets/js/32.d1d99c18.js"><link rel="prefetch" href="/learn-typescript/assets/js/33.30375215.js"><link rel="prefetch" href="/learn-typescript/assets/js/34.0793a4c4.js"><link rel="prefetch" href="/learn-typescript/assets/js/35.53b6d49b.js"><link rel="prefetch" href="/learn-typescript/assets/js/36.ac8bf61c.js"><link rel="prefetch" href="/learn-typescript/assets/js/37.fd5643e7.js"><link rel="prefetch" href="/learn-typescript/assets/js/38.cb01bbc7.js"><link rel="prefetch" href="/learn-typescript/assets/js/39.c0aa84fb.js"><link rel="prefetch" href="/learn-typescript/assets/js/4.91e6f4a0.js"><link rel="prefetch" href="/learn-typescript/assets/js/40.f6df32aa.js"><link rel="prefetch" href="/learn-typescript/assets/js/41.cfca785a.js"><link rel="prefetch" href="/learn-typescript/assets/js/42.cf887dd0.js"><link rel="prefetch" href="/learn-typescript/assets/js/43.44be6b1d.js"><link rel="prefetch" href="/learn-typescript/assets/js/44.08b69751.js"><link rel="prefetch" href="/learn-typescript/assets/js/5.1eb21207.js"><link rel="prefetch" href="/learn-typescript/assets/js/6.907bfa80.js"><link rel="prefetch" href="/learn-typescript/assets/js/7.20cd2429.js"><link rel="prefetch" href="/learn-typescript/assets/js/8.38a99588.js"><link rel="prefetch" href="/learn-typescript/assets/js/9.da1e0b9c.js">
    <link rel="stylesheet" href="/learn-typescript/assets/css/0.styles.538df46e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>TypeScript4 中文文档</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>TypeScript最新官方文档翻译,TypeScript中文手册,提供 TypeScript 从入门到进阶的系统学习教程</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-typescript/" class="home-link router-link-active"><!----> <span class="site-name">TypeScript4 中文文档</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/mqyqingfeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  冴羽的 JavaScript 博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/mqyqingfeng/learn-typescript" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>3</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="https://github.com/mqyqingfeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  冴羽的 JavaScript 博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/mqyqingfeng/learn-typescript" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/learn-typescript/" class="sidebar-heading clickable router-link-active"><span>欢迎</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-typescript/handbook/TheBasics" class="sidebar-heading clickable open active"><span>基础</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-typescript/handbook/TheBasics.html" aria-current="page" class="active sidebar-link">基础</a></li><li><a href="/learn-typescript/handbook/EverydayType.html" class="sidebar-link">常见类型</a></li><li><a href="/learn-typescript/handbook/Narrowing.html" class="sidebar-link">类型收窄</a></li><li><a href="/learn-typescript/handbook/MoreOnFunctions.html" class="sidebar-link">函数</a></li><li><a href="/learn-typescript/handbook/ObjectTypes.html" class="sidebar-link">对象类型</a></li><li><a href="/learn-typescript/handbook/Generics.html" class="sidebar-link">泛型</a></li><li><a href="/learn-typescript/handbook/KeyofTypeOperator.html" class="sidebar-link">keyof 操作符</a></li><li><a href="/learn-typescript/handbook/TypeofTypeOperator.html" class="sidebar-link">typeof 操作符</a></li><li><a href="/learn-typescript/handbook/IndexedAccessTypes.html" class="sidebar-link">索引访问类型</a></li><li><a href="/learn-typescript/handbook/ConditionalTypes.html" class="sidebar-link">条件类型</a></li><li><a href="/learn-typescript/handbook/MappedTypes.html" class="sidebar-link">映射类型</a></li><li><a href="/learn-typescript/handbook/TemplateLiteralTypes.html" class="sidebar-link">模板字面量类型</a></li><li><a href="/learn-typescript/handbook/Class.html" class="sidebar-link">类</a></li><li><a href="/learn-typescript/handbook/Modules.html" class="sidebar-link">模块</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-typescript/reference/UtilityTypes" class="sidebar-heading clickable"><span>拓展</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-typescript/advance/" class="sidebar-heading clickable"><span>进阶</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-typescript/practice/" class="sidebar-heading clickable"><span>实战</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>title</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">title</h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><blockquote><p>本文译者<a href="https://github.com/mqyqingfeng" target="_blank" rel="noopener noreferrer">冴羽<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，感谢<a href="https://github.com/lvfangren" target="_blank" rel="noopener noreferrer"> lvfangren <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://github.com/Congb19" target="_blank" rel="noopener noreferrer">Congb19<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>等人的<a href="http://www.ts.yayujs.com/learn-typescript/introduction/correctErrors.html" target="_blank" rel="noopener noreferrer">勘误<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://www.typescriptlang.org/docs/handbook/2/basic-types.html" target="_blank" rel="noopener noreferrer">原文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="基础-the-basics"><a href="#基础-the-basics" class="header-anchor">#</a> 基础（The Basics）</h2> <p>JavaScript 的每个值执行不同的操作时会有不同的行为。这听起来有点抽象，所以让我们举个例子，假设我们有一个名为 <code>message</code> 的变量，试想我们可以做哪些操作：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Accessing the property 'toLowerCase'</span>
<span class="token comment">// on 'message' and then calling it</span>
message<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Calling 'message'</span>
<span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>第一行代码是获取属性 <code>toLowerCase</code> ，然后调用它。第二行代码则是直接调用 <code>message</code> 。</p> <p>但其实我们连 <code>message</code> 的值都不知道呢，自然也不知道这段代码的执行结果。每一个操作行为都先取决于我们有什么样的值。</p> <ul><li><code>message</code> 是可调用的吗？</li> <li><code>message</code> 有一个名为 <code>toLowerCase</code> 的属性吗？</li> <li>如果有，<code>toLowerCase</code> 是可以被调用的吗？</li> <li>如果这些值都可以被调用，它们会返回什么？</li></ul> <p>当我们写 JavaScript 的时候，这些问题的答案我们需要谨记在心，同时还要期望处理好所有的细节。</p> <p>让我们假设 <code>message</code> 是这样定义的：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>你完全可以猜到这段代码的结果，如果我们尝试运行 <code>message.toLowerCase()</code> ，我们可以得到这段字符的小写形式。</p> <p>那第二段代码呢？如果你对 JavaScript 比较熟悉，你肯定知道会报如下错误：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>TypeError<span class="token operator">:</span> message <span class="token keyword">is</span> not a <span class="token keyword">function</span>
</code></pre></div><p>如果我们能避免这样的报错就好了。</p> <p>当我们运行代码的时候，JavaScript 会在运行时先算出值的类型（type），然后再决定干什么。所谓值的类型，也包括了这个值有什么行为和能力。当然 <code>TypeError</code> 也会暗示性的告诉我们一点，比如在这个例子里，它告诉我们字符串 <code>Hello World</code> 不能作为函数被调用。</p> <p>对于一些值，比如基本值 <code>string</code> 和 <code>number</code>，我们可以使用 <code>typeof</code> 运算符确认他们的类型。但是对于其他的比如函数，就没有对应的方法可以确认他们的类型了，举个例子，思考这个函数：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们通过阅读代码可以知道，函数只有被传入一个拥有可调用的 <code>flip</code> 属性的对象，才会正常执行。但是 JavaScript 在代码执行时，并不会把这个信息体现出来。在 JavaScript 中，唯一可以知道 <code>fn</code> 在被传入特殊的值时会发生什么，就是调用它，然后看会发生什么。这种行为让你很难在代码运行前就预测代码执行结果，这也意味着当你写代码的时候，你会更难知道你的代码会发生什么。</p> <p>从这个角度来看，类型就是描述什么样的值可以被传递给 <code>fn</code>，什么样的值则会导致崩溃。JavaScript 仅仅提供了动态类型（dynamic typing），这需要你先运行代码然后再看会发生什么。</p> <p>替代方案就是使用静态类型系统（static type system），在代码运行之前就预测需要什么样的代码。</p> <h2 id="静态类型检查-static-type-checking"><a href="#静态类型检查-static-type-checking" class="header-anchor">#</a> 静态类型检查（Static type-checking）</h2> <p>让我们再回想下这个将 <code>string</code> 作为函数进行调用而产生的 <code>TypeError</code> ，大部分的人并不喜欢在运行代码的时候得到报错。这些会被认为是 bug。当我们写新代码的时候，我们也尽力避免产生新的 bug。</p> <p>如果我们添加一点代码，保存文件，然后重新运行代码，就能立刻看到错误，我们可以很快的定位到问题，但也并不总是这样，比如如果我们没有做充分的测试，我们就遇不到可能出错的情况。或者如果我们足够幸运看到了这个错误，我们也许不得不做一个大的重构，然后添加很多不同的代码，才能找出问题所在。</p> <p>理想情况下，我们应该有一个工具可以帮助我们，在代码运行之前就找到错误。这就是静态类型检查器比如 TypeScript 做的事情。静态类型系统（Static types systems）描述了值应有的结构和行为。一个像 TypeScript 的类型检查器会利用这个信息，并且在可能会出错的时候告诉我们：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;hello!&quot;</span><span class="token punctuation">;</span>
 
<span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This expression is not callable.</span>
<span class="token comment">// Type 'String' has no call signatures.</span>
</code></pre></div><p>在这个例子中，TypeScript 会在运行之前就会抛出错误信息。</p> <h2 id="非异常失败-non-exception-失败"><a href="#非异常失败-non-exception-失败" class="header-anchor">#</a> 非异常失败（Non-exception 失败）</h2> <p>至今为止，我们已经讨论的都是运行时的错误，所谓运行时错误，就是 JavaScript 会在运行时告诉我们它认为的一些没有意义的事情。这些事情之所以会出现，是因为 <a href="https://tc39.github.io/ecma262/" target="_blank" rel="noopener noreferrer">ECMAScript 规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>已经明确的声明了这些异常时的行为。</p> <p>举个例子，规范规定，当调用一个非可调用的东西时应该抛出一个错误。也许听起来像是理所当然的，由此你可能认为，如果获取一个对象不存在的属性也应该抛出一个错误，但是 JavaScript 并不会这样，它不报错，还返回值 <code>undefined</code>。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Daniel&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>location<span class="token punctuation">;</span> <span class="token comment">// returns undefined</span>
</code></pre></div><p>一个静态类型需要标记出哪些代码是一个错误，哪怕实际生效的 JavaScript 并不会立刻报错。在 TypeScript 中，下面的代码会产生一个 <code>location</code> 不存在的报错：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Daniel&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
user<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
<span class="token comment">// Property 'location' does not exist on type '{ name: string; age: number; }'.</span>
</code></pre></div><p>尽管有时候这意味着你需要在表达的时候上做一些取舍，但目的还是找出我们项目中一些合理的错误。TypeScript 现在已经可以捕获很多合理的错误。</p> <p>举个例子，比如拼写错误：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> announcement <span class="token operator">=</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">;</span>
 
<span class="token comment">// How quickly can you spot the typos?</span>
announcement<span class="token punctuation">.</span><span class="token function">toLocaleLowercase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
announcement<span class="token punctuation">.</span><span class="token function">toLocalLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// We probably meant to write this...</span>
announcement<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>函数未被调用：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">flipCoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Meant to be Math.random()</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span>random <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
<span class="token comment">// Operator '&lt;' cannot be applied to types '() =&gt; number' and 'number'.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>基本的逻辑错误：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// This condition will always return 'false' since the types '&quot;a&quot;' and '&quot;b&quot;' have no overlap.</span>
  <span class="token comment">// Oops, unreachable</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="类型工具-types-for-tooling"><a href="#类型工具-types-for-tooling" class="header-anchor">#</a> 类型工具（Types for Tooling）</h2> <p>TypeScript 不仅在我们犯错的时候，可以找出错误，还可以防止我们犯错。</p> <p>类型检查器因为有类型信息，可以检查比如说是否正确获取了一个变量的属性。也正是因为有这个信息，它也可以在你输入的时候，列出你可能想要使用的属性。</p> <p>这意味着 TypeScript 对你编写代码也很有帮助，核心的类型检查器不仅可以提供错误信息，还可以提供代码补全功能。这就是 TypeScript 在工具方面的作用。
<img src="https://cdn.jsdelivr.net/gh/mqyqingfeng/picture/image.png" alt=""></p> <p>TypeScript 的功能很强大，除了在你输入的时候提供补全和错误信息。还可以支持“快速修复”功能，即自动的修复错误，重构成组织清晰的代码。同时也支持导航功能，比如跳转到变量定义的地方，或者找到一个给定的变量所有的引用。</p> <p>所有这些功能都建立在类型检查器上，并且跨平台支持。<a href="https://github.com/Microsoft/TypeScript/wiki/TypeScript-Editor-Support" target="_blank" rel="noopener noreferrer">有可能你最喜欢的编辑器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>已经支持了 TypeScript。</p> <h2 id="tsc-typescript-编译器-tsc-the-typescript-compiler"><a href="#tsc-typescript-编译器-tsc-the-typescript-compiler" class="header-anchor">#</a> <code>tsc</code> TypeScript 编译器（tsc，the TypeScript compiler）</h2> <p>至今我们只是讨论了类型检查器，但是还一直没有用过。现在让我们了解下我们的新朋友 <code>tsc</code> —— TypeScript 编译器。首先，我们可以通过 npm 安装它：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g typescript
</code></pre></div><blockquote><p>这会把 TypeScript 编译器安装在全局，如果你想把 <code>tsc</code> 安装在一个本地的 <code>node_modules</code> 中，你也可以使用 npx 或者类似的工具。</p></blockquote> <p>让我们创建一个空文件夹，然后写下我们第一个 TypeScript 程序: <code>hello.ts</code>：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Greets the world.</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意这里并没有什么多余的修饰，这个 <code>hello world</code> 项目就跟你用 JavaScript 写是一样的。现在你可以运行 <code>tsc</code> 命令，执行类型检查：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>tsc hello.ts
</code></pre></div><p>现在我们已经运行了 <code>tsc</code>，但是你会发现什么也没有发生。确实如此，因为这里并没有什么类型错误，所以命令行里也不会有任何输出。</p> <p>但如果我们再次检查一次，我们就会发现，我们得到了一个新的文件。查看一下当前目录，我们会发现 <code>hello.ts</code> 同级目录下还有一个 <code>hello.js</code>，这就是 <code>hello.ts</code> 文件编译输出的文件， <code>tsc</code> 会把 ts 文件编译成一个纯 JavaScript 文件。让我们查看一下编译输出的文件：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Greets the world.</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个例子中，因为 TypeScript 并没有什么要编译处理的内容，所以看起来跟我们写的是一样的。编译器会尽可能输出干净的代码，就像是正常开发者写的那样，当然这并不是容易的事情，但 TypeScript 会坚持这样做，比如保持缩进，注意跨行代码，保留注释等。</p> <p>如果我们执意要产生一个类型检查错误呢？我们可以这样写 <code>hello.ts</code>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// This is an industrial-grade general-purpose greeter function:</span>
<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, today is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token string">&quot;Brendan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>此时我们再运行下 <code>tsc hello.ts</code> 。这次我们会在命令行里得到一个错误：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>Expected <span class="token number">2</span> arguments<span class="token punctuation">,</span> but got <span class="token number">1.</span>
</code></pre></div><p>TypeScript 告诉我们少传了一个参数给 <code>greet</code> 函数。</p> <p>虽然我们编写的是标准的 JavaScript，但 TypeScript 依然可以帮助我们找到代码中的错误，cool~。</p> <h2 id="报错时仍产出文件-emitting-with-errors"><a href="#报错时仍产出文件-emitting-with-errors" class="header-anchor">#</a> 报错时仍产出文件（Emitting with Errors）</h2> <p>在刚才的例子中，有一个细节你可能没有注意到，那就是如果我们打开编译输出的文件，我们会发现文件依然发生了改动。这是不是有点奇怪？<code>tsc</code>  明明已经报错了，为什么还要再编译文件？这就要讲到 TypeScript 一个核心的观点：大部分时候，你要比 TypeScript 更清楚你的代码。</p> <p>举个例子，假如你正在把你的代码迁移成 TypeScript，这会产生很多类型检查错误，而你不得不为类型检查器处理掉所有的错误，这时候你就要想了，明明之前的代码可以正常工作，TypeScript 为什么要阻止代码正常运行呢？</p> <p>所以 TypeScript 并不会阻碍你。当然了，你如果想要 TypeScript 更严厉一些，你可以使用 <a href="https://www.typescriptlang.org/tsconfig#noEmitOnError" target="_blank" rel="noopener noreferrer">noEmitOnError<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 编译选项，试着改下你的 <code>hello.ts</code> 文件，然后运行 <code>tsc</code>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>tsc <span class="token operator">--</span>noEmitOnError hello<span class="token punctuation">.</span>ts
</code></pre></div><p>你会发现 <code>hello.js</code> 并不会得到更新。</p> <h2 id="显示类型-explicit-types"><a href="#显示类型-explicit-types" class="header-anchor">#</a> 显示类型（Explicit Types）</h2> <p>直到现在，我们还没有告诉 TypeScript，<code>person</code> 和 <code>date</code> 是什么类型，让我们编辑一下代码，告诉 TypeScript，<code>person</code> 是一个 <code>string</code> 类型，<code>date</code> 是一个 <code>Date</code> 对象。同时我们使用 <code>date</code> 的 <code>toDateString()</code> 方法。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> date<span class="token operator">:</span> Date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, today is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们所做的就是给 <code>person</code> 和 <code>date</code> 添加了<strong>类型注解（type annotations）</strong>，描述 <code>greet</code> 函数可以支持传入什么样的值。你可以如此理解这个<strong>签名 (signature)</strong>： <code>greet</code> 支持传入一个 <code>string</code> 类型的 <code>person</code> 和一个 <code>Date</code> 类型的 <code>date</code> 。</p> <p>添加类型注解后，TypeScript 就可以提示我们，比如说当 <code>greet</code> 被错误调用时：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> date<span class="token operator">:</span> Date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, today is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token string">&quot;Maddison&quot;</span><span class="token punctuation">,</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Argument of type 'string' is not assignable to parameter of type 'Date'.</span>
</code></pre></div><p>TypeScript 提示第二个参数有错误，这是为什么呢？</p> <p>这是因为，在 JavaScript 中调用 <code>Date()</code> 会返回一个 <code>string</code> 。使用 <code>new Date()</code> 才会产生 <code>Date</code> 类型的值。</p> <p>我们快速修复下这个问题：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> date<span class="token operator">:</span> Date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, today is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token string">&quot;Maddison&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>记住，我们并不需要总是写类型注解，大部分时候，TypeScript 可以自动推断出类型：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token string">&quot;hello there!&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// let msg: string</span>
</code></pre></div><p>尽管我们并没有告诉 TypeScript， <code>msg</code>  是 <code>string</code> 类型的值，但它依然推断出了类型。这是一个特性，如果类型系统可以正确的推断出类型，最好就不要手动添加类型注解了。</p> <h2 id="类型抹除-erased-types"><a href="#类型抹除-erased-types" class="header-anchor">#</a> 类型抹除（Erased Types）</h2> <p>上一个例子里的代码，TypeScript 会编译成什么样呢？我们来看一下：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> person <span class="token operator">+</span> <span class="token string">&quot;, today is &quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token string">&quot;Maddison&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意两件事情：</p> <ol><li>我们的 <code>person</code>  和 <code>date</code> 参数不再有类型注解</li> <li>模板字符串，即用 ``` 包裹的字符串被转换为使用 <code>+</code> 号连接</li></ol> <p>让我们先看下第一点。类型注解并不是 JavaScript 的一部分。所以并没有任何浏览器或者运行环境可以直接运行 TypeScript 代码。这就是为什么 TypeScript 需要一个编译器，它需要将 TypeScript 代码转换为 JavaScript 代码，然后你才可以运行它。所以大部分 TypeScript 独有的代码会被抹除，在这个例子中，像我们的类型注解就全部被抹除了。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>谨记：类型注解并不会更改程序运行时的行为
</code></pre></div><h2 id="降级-downleveling"><a href="#降级-downleveling" class="header-anchor">#</a> 降级（Downleveling）</h2> <p>我们再来关注下第二点，原先的代码是：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, today is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><p>被编译成了:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> person <span class="token operator">+</span> <span class="token string">&quot;, today is &quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>为什么要这样做呢？</p> <p>这是因为模板字符串是 ECMAScript2015（也被叫做 ECMAScript 6 ,ES2015, ES6 等）里的功能，TypeScript 可将新版本的代码编译为老版本的代码，比如 ECMAScript3 或者 ECMAScript5 。这个将高版本的 ECMAScript 语法转为低版本的过程就叫做<strong>降级（downleveling）</strong> 。</p> <p>TypeScript 默认转换为 <code>ES3</code>，一个 ECMAScript 非常老的版本。我们也可以使用 <a href="https://www.typescriptlang.org/tsconfig#target" target="_blank" rel="noopener noreferrer">target<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 选项转换为比较新的一些版本，比如执行 <code>--target es2015</code> 会转换为 ECMAScript 2015, 这意味着转换后的代码可以在任何支持 ECMAScript 2015 的地方运行。</p> <p>执行  <code>tsc --target es2015 hello.ts</code> ，让我们看下编译成 ES2015 后的代码：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, today is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token string">&quot;Maddison&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>尽管默认的目标是 ES3 版本，但是大多数的浏览器都已经支持 ES2015 了，因此大部分开发者可以安全的指定为 ES2015 或者更新的版本，除非你非要兼容某个问题浏览器。</p></blockquote> <h2 id="严格模式-strictness"><a href="#严格模式-strictness" class="header-anchor">#</a> 严格模式（Strictness）</h2> <p>不同的用户使用 TypeScript 会关注不同的事情。一些用户会寻找较为宽松的体验，既可以帮助检查他们程序中的部分代码，也可以享受 TypeScript 的工具功能。这就是 TypeScript 默认的开发体验，类型是可选的，推断会兼容大部分的类型，对有可能是 <code>null</code>/ <code>undefined</code> 值也不做强制检查。就像 tsc 在编译报错时依然会输出文件，这些默认选项并不会阻碍你的开发。如果你正在迁移 JavaScript 代码，最一开始就可以使用这种方式。</p> <p>与之形成鲜明对比的是，还有很多用户希望 TypeScript 尽可能多地检查代码，这就是为什么这门语言会提供严格模式设置。但不同于切换开关的形式（要么检查要么不检查），TypeScript 提供的形式更像是一个刻度盘，你越是转动它，TypeScript 就会检查越多的内容。这需要一点额外的工作，但是是值得的，它可以带来更全面的检查和更准确的工具功能。如果可能的话，新项目应该始终开启这些严格设置。</p> <p>TypeScript 有几个严格模式设置的开关。除非特殊说明，文档里的例子都是在严格模式下写的。CLI 里的 <a href="https://www.typescriptlang.org/tsconfig/#strict" target="_blank" rel="noopener noreferrer">strict<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 配置项，或者 <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener noreferrer">tsconfig.json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中的 <code>&quot;strict&quot;: true</code> 可以同时开启，也可以分开设置。在这些设置里，你最需要了解的是 <a href="https://www.typescriptlang.org/tsconfig#noImplicitAny" target="_blank" rel="noopener noreferrer">noImplicitAny<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://www.typescriptlang.org/tsconfig#strictNullChecks" target="_blank" rel="noopener noreferrer">strictNullChecks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="noimplicitany"><a href="#noimplicitany" class="header-anchor">#</a> <code>noImplicitAny</code></h2> <p>在某些时候，TypeScript 并不会为我们推断类型，这时候就会回退到最宽泛的类型：<code>any</code> 。这倒不是最糟糕的事情，毕竟回退到 <code>any</code>就跟我们写 JavaScript 没啥一样了。</p> <p>但是，经常使用 <code>any</code> 有违背我们使用 TypeScript 的目的。你程序使用的类型越多，你在验证和工具上得到的帮助就会越多，这也意味着写代码的时候会遇到更少的 bug。启用 <a href="https://www.typescriptlang.org/tsconfig#noImplicitAny" target="_blank" rel="noopener noreferrer">noImplicitAny<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 配置项后，当类型被隐式推断为 <code>any</code> 时，会抛出一个错误。</p> <h2 id="strictnullchecks"><a href="#strictnullchecks" class="header-anchor">#</a> <code>strictNullChecks</code></h2> <p>默认情况下，像 <code>null</code> 和 <code>undefined</code> 这样的值可以赋值给其他的类型。这可以让我们更方便的写一些代码。但是忘记处理 <code>null</code>  和 <code>undefined</code> 也导致了不少的 bug，甚至有些人会称呼它为<a href="https://www.youtube.com/watch?v=ybrQvs4x0Ps" target="_blank" rel="noopener noreferrer">价值百万的错误<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>！  <a href="https://www.typescriptlang.org/tsconfig#strictNullChecks" target="_blank" rel="noopener noreferrer">strictNullChecks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 选项会让我们更明确的处理 <code>null</code> 和 <code>undefined</code>，也会让我们免于忧虑是否忘记处理 <code>null</code> 和 <code>undefined</code> 。</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2022/2/28</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/learn-typescript/introduction/correctErrors.html" class="prev">
            勘误
          </a></span> <span class="next"><a href="/learn-typescript/handbook/EverydayType.html">
            常见类型
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#基础-the-basics" class="sidebar-link reco-side-基础-the-basics" data-v-cb1513f6>基础（The Basics）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#静态类型检查-static-type-checking" class="sidebar-link reco-side-静态类型检查-static-type-checking" data-v-cb1513f6>静态类型检查（Static type-checking）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#非异常失败-non-exception-失败" class="sidebar-link reco-side-非异常失败-non-exception-失败" data-v-cb1513f6>非异常失败（Non-exception 失败）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#类型工具-types-for-tooling" class="sidebar-link reco-side-类型工具-types-for-tooling" data-v-cb1513f6>类型工具（Types for Tooling）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#tsc-typescript-编译器-tsc-the-typescript-compiler" class="sidebar-link reco-side-tsc-typescript-编译器-tsc-the-typescript-compiler" data-v-cb1513f6>tsc TypeScript 编译器（tsc，the TypeScript compiler）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#报错时仍产出文件-emitting-with-errors" class="sidebar-link reco-side-报错时仍产出文件-emitting-with-errors" data-v-cb1513f6>报错时仍产出文件（Emitting with Errors）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#显示类型-explicit-types" class="sidebar-link reco-side-显示类型-explicit-types" data-v-cb1513f6>显示类型（Explicit Types）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#类型抹除-erased-types" class="sidebar-link reco-side-类型抹除-erased-types" data-v-cb1513f6>类型抹除（Erased Types）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#降级-downleveling" class="sidebar-link reco-side-降级-downleveling" data-v-cb1513f6>降级（Downleveling）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#严格模式-strictness" class="sidebar-link reco-side-严格模式-strictness" data-v-cb1513f6>严格模式（Strictness）</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#noimplicitany" class="sidebar-link reco-side-noimplicitany" data-v-cb1513f6>noImplicitAny</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-typescript/handbook/TheBasics.html#strictnullchecks" class="sidebar-link reco-side-strictnullchecks" data-v-cb1513f6>strictNullChecks</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/learn-typescript/assets/js/app.4ea17abc.js" defer></script><script src="/learn-typescript/assets/js/3.ebbd5603.js" defer></script><script src="/learn-typescript/assets/js/1.af137d23.js" defer></script><script src="/learn-typescript/assets/js/24.36da8f67.js" defer></script>
  </body>
</html>
